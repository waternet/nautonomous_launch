<launch>

	<arg name="rosbag_enabled" default="false"/>
	<arg name="rosbag_prefix_url" default="/tmp"/>
	
	<arg name="cmd_vel_topic" default="cmd_vel_topic"/>

	<arg name="left_motor_topic" default="left_motor_topic"/>
	<arg name="right_motor_topic" default="right_motor_topic"/>

	<node name="twist_to_motors" pkg="nautonomous_propulsion_differential" type="twist_to_motors.py" output="screen">
		<param name="base_width" value="0.5" />
        <param name="rate" value="10" />

        <remap from="cmd_vel_topic" to="$(arg cmd_vel_topic)"/>

		<remap from="left_motor_topic" to="$(arg left_motor_topic)"/>
		<remap from="right_motor_topic" to="$(arg right_motor_topic)"/>
	</node>

	<node pkg="rosbag" type="record" name="rosbag_propulsion_differential" args="record -o $(arg rosbag_prefix_url)/propulsion/differential $(arg cmd_vel_topic) $(arg left_motor_topic) $(arg right_motor_topic)" output="screen" if="$(arg rosbag_enabled)"/>

</launch>

